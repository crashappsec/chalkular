# Copyright (C) 2025 Crash Override, Inc.
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the FSF, either version 3 of the License, or (at your option) any later version.
# See the LICENSE file in the root of this repository for full license text or
# visit: <https://www.gnu.org/licenses/gpl-3.0.html>.

apiVersion: ocular.crashoverride.run/v1beta1
kind: Downloader
metadata:
  name: chalkular-artifacts
  namespace: default
spec:
  container:
    env:
      - name: DOCKER_CONFIG
        value: /ocular/docker
    image: ghcr.io/crashappsec/ocular-default-downloaders:latest
    name: docker
    resources: {}
    volumeMounts:
      - mountPath: /ocular/docker/config.json
        name: docker-file-secrets
        readOnly: true
        subPath: dockerconfig
  metadataFiles:
    - /mnt/metadata/docker.json
    - /mnt/metadata/chalk.json
  volumes:
    - name: docker-file-secrets
      secret:
        optional: true
        secretName: downloader-secrets