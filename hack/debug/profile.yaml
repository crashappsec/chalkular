# Copyright (C) 2025 Crash Override, Inc.
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the FSF, either version 3 of the License, or (at your option) any later version.
# See the LICENSE file in the root of this repository for full license text or
# visit: <https://www.gnu.org/licenses/gpl-3.0.html>.

apiVersion: ocular.crashoverride.run/v1beta1
kind: Profile
metadata:
  name: debug
  namespace: default
spec:
  containers:
    - name: "trufflehog"
      image: "trufflesecurity/trufflehog:latest"
      imagePullPolicy: "IfNotPresent"
      command: ["/bin/sh", "-c"]
      args: ["trufflehog docker --image=file://$OCULAR_TARGET_DIR/target.tar --json | tee $OCULAR_RESULTS_DIR/trufflehog.jsonl"]
  artifacts:
    - trufflehog.jsonl